# umapi_sms_ru

sms_ru
======

Nodejs модуль для работы с API сервиса [umapi.sms.ru](http://umapi.sms.ru)

Официальная документация по работе с API – [http://umapi.sms.ru/?panel=api](http://umapi.sms.ru/?panel=api)
## Установка
```
npm install umapi_sms_ru
```

## Использование

Подключение:
```js
var UMAPI_SMS_RU = require('umapi_sms_ru');
```

Авторизация (с помощью api_id):
```js
var sms = new UMAPI_SMS_RU(api_id);
```


Отправка SMS:

|Параметр|Обязательный|Описание                                                                           |
|--------|------------|-----------------------------------------------------------------------------------|
|to|Да|Номер телефона получателя (либо несколько номеров, через запятую — до 100 штук за один запрос). Вы также можете указать номера в виде массива to[номер получателя]=текст&to[номер получателя]=текст. Если вы указываете несколько номеров и один из них указан неверно, то вместо идентификатора сообщения в выдаче вы получите трехзначный код ошибки. Если вы отправляете более, чем на 10 номеров за раз, то рекомендуем параметр to передавать в теле запроса методом POST, а не в адресной строке.|
|msg|Да|Текст сообщения в кодировке UTF-8|
|from|Нет|Имя отправителя (должно быть согласовано с администрацией). Если не заполнено, в качестве отправителя будет указан ваш отправитель по умолчанию.|
|ip|Нет|Если СМС сообщение отправляется в ответ на действия пользователя (например сообщение содержит код авторизации), то мы можем защитить вас на случай от действий злоумышленников, которые вынуждают вас отправлять много сообщений на один или разные номера (к примеру, регистрируясь много раз подряд на вашем сайте с одного IP адреса). В этом параметре вы можете передать нам IP адрес вашего пользователя, и, если мы заметим, что с этим IP связано большое количество сообщений, то мы их начнем блокировать (ограничение настраивается в разделе "Настройки").|
|time|Нет|Если вам нужна отложенная отправка, то укажите время отправки. Указывается в формате UNIX TIME (пример: 1280307978). Должно быть не больше 2 месяцев с момента подачи запроса. Если время меньше текущего времени, сообщение отправляется моментально.|
|daytime|Нет|Учитывает часовой пояс получателя. Если у получателя сейчас ночь (уже наступило время 20:00), то откладывает отправку до 10 часов утра. Если указан этот параметр, то параметр time игнорируется.|
|translit|Нет|Переводит все русские символы в латинские.|
|test|Нет|Имитирует отправку сообщения для тестирования ваших программ на правильность обработки ответов сервера. При этом само сообщение не отправляется и баланс не расходуется.|

```js
sms.send( to, msg, from , ip, time, daytime, translit, test)
.then(e => console.log(e.data))
.catch(console.error);
```


## Автор

[Alexandr Nikulin](https://github.com/SashokNekulin/), e-mail: [nekulin@mail.ru](mailto:nekulin@mail.ru)
